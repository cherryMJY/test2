<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- 引入 Bootstrap -->
      <link href="/static/bootstrap/css/bootstrap.min.css" rel="stylesheet">

      <!-- HTML5 Shiv 和 Respond.js 用于让 IE8 支持 HTML5元素和媒体查询 -->
      <!-- 注意： 如果通过 file://  引入 Respond.js 文件，则该文件无法起效果 -->
      <!--[if lt IE 9]>
         <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
         <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
      <![endif]-->
    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="/static/dist/js/jquery-2.0.3.min.js"></script>

    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="/static/bootstrap/js/bootstrap.min.js"></script>
    <script src="/static/dist/js/index/knowledge_acquire.js"></script>
{#    <script src="/static/js/index/homepage.js"></script>#}
    <link type="text/css" rel="stylesheet" href="/static/dist/css/index/knowledge_acquire.css">
    <link type="text/css" rel="stylesheet" href="/static/dist/css/sidebar.css">
    <link type="text/css" rel="stylesheet" href="/static/dist/css/header.css">

    <!-- DataTables css -->
    <link rel="stylesheet" href="/static/datatables/media/css/dataTables.bootstrap.min.css">

    <!-- DataTables js-->
    <script src="/static/datatables/media/js/jquery.dataTables.min.js"></script>
    <script src="/static/datatables/media/js/dataTables.bootstrap.min.js"></script>

    <script src="/static/bootstrap-fileinput-master/js/fileinput.min.js"></script>
    <link type="text/css" rel="stylesheet" href="/static/bootstrap-fileinput-master/css/fileinput.css">

    <script>
        $.ajaxSetup({
            data:{csrfmiddlewaretoken:'{{ csrf_token }}'}
        })
    </script>

    <title>知识图谱构建系统</title>

</head>
<body>
    <div id="wrapper">
        {% include "header.html" %}
        {% include "sidebar.html" %}
        <div class="col-sm-10 main-content">
            <div class="container-fluid">
                <div class="row">
                    <h1>知识获取</h1>
                </div>
                <div class="row btn_div">
                    <input type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal" value="文件上传">
                    <input type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal2" value="百科爬虫">
                    <a class="btn btn-primary" href="/index/spider">爬虫</a>
                </div>

{#                <div class="row category_title">#}
{#                    <i class="glyphicon glyphicon-tags tag"></i>#}
{#                    <span>文件上传</span>#}
{#                    <input type="button" class="btn btn-default" data-toggle="modal" data-target="#myModal" value="test1">#}
{#                </div>#}
{#                <div class="row category_title">#}
{#                    <i class="glyphicon glyphicon-tags tag"></i>#}
{#                    <span>爬虫获取</span>#}
{#                </div>#}
{#                <div class="row category_title">#}
{#                    <i class="glyphicon glyphicon-tags tag"></i>#}
{#                    <span>数据获取记录</span>#}
{#                </div>#}
                <div class="row">
                    <table class="table table-striped table-bordered table-hover" id="dataTables-example">
                        <thead>
                            <tr>
                                <th>编号</th>
                                <th>数据来源</th>
                                <th>获取方式</th>
                                <th>获取时间</th>
                                <th data-type="num">执行操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for item in ret_log %}
                                <tr data-id="{{ item.id }}">
                                    <td><span>{{ item.id }}</span></td>
                                    <td><span>{{ item.data_source_name }}</span></td>
                                    <td>
                                      <span>{{ item.data_access }}</span>
                                    </td>
                                    <td>
                                        <span>{{ item.create_time }}</span>
                                    </td>
                                    <td>
                                        <input type="button" class="btn btn-default view_file_content" value="查看内容">
                                        <input type="button" class="btn btn-default log_delete" value="删除">
                                    </td>
                                </tr>
                            {% endfor %}
{#                          <tr>#}
{#                            <td class="project-group"><span class="editable editable-click editable-empty">1</span></td>#}
{#                            <td class="project-name"><span>图谱知识库构建Excel文档1.xlsx</span></td>#}
{#                            <td class="project-progress progress-all">#}
{#                              <span>文件</span>#}
{#                            </td>#}
{#                            <td class="project-progress progress-all">#}
{#                                <span>2020-03-16 17:13:36</span>#}
{#                            </td>#}
{#                            <td class="project-actions" >#}
{#                                <input type="button" class="btn btn-default btn-group-xs batch-upload" id="{{ project.id }}" value="查看内容">#}
{#                                <input type="button" class="btn btn-default btn-group-xs batch-upload" id="{{ project.id }}" value="删除">#}
{#                            </td>#}
{#                          </tr>#}
{#                          <tr data-name="{{ project.id }}">#}
{#                            <td class="project-group"><span class="editable editable-click editable-empty">2</span></td>#}
{#                            <td class="project-name"><span>图谱知识库构建Excel文档2.xlsx</span></td>#}
{#                            <td class="project-progress progress-all">#}
{#                              <span>文件</span>#}
{#                            </td>#}
{#                            <td class="project-progress progress-all">#}
{#                                <span>2020-03-16 17:13:36</span>#}
{#                            </td>#}
{#                            <td class="project-actions" >#}
{#                                <input type="button" class="btn btn-default btn-group-xs batch-upload" id="{{ project.id }}" value="查看内容">#}
{#                                <input type="button" class="btn btn-default btn-group-xs batch-upload" id="{{ project.id }}" value="删除">#}
{#                            </td>#}
{#                          </tr>#}
{#                          <tr data-name="{{ project.id }}">#}
{#                            <td class="project-group"><span class="editable editable-click editable-empty">3</span></td>#}
{#                            <td class="project-name"><span>一出好戏</span></td>#}
{#                            <td class="project-progress progress-all">#}
{#                              <span>爬虫</span>#}
{#                            </td>#}
{#                            <td class="project-progress progress-all">#}
{#                                <span>2020-03-16 17:13:36</span>#}
{#                            </td>#}
{#                            <td class="project-actions" >#}
{#                                <input type="button" class="btn btn-default btn-group-xs batch-upload" id="{{ project.id }}" value="查看内容">#}
{#                                <input type="button" class="btn btn-default btn-group-xs batch-upload" id="{{ project.id }}" value="删除">#}
{#                            </td>#}
{#                          </tr>#}
{#                                        <td>当前没有爬虫项目可运行!!!</td>#}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
   </div>

    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h4 class="modal-title" id="myModalLabel">
                        文件上传
                    </h4>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal" role="form">
{#                        {% csrf_token %}#}
                        <div class="form-group">
                           <div class="col-sm-4 control-label">选择文件</div>
                           <div class="col-sm-6">
                               <div class="input-group">
                               <input id='location' class="form-control" onclick="$('#i-file').click();">
                                   <label class="input-group-btn">
                                       <input type="button" id="i-check" value="浏览文件" class="btn btn-primary" onclick="$('#i-file').click();">
                                   </label>
                               </div>
                           </div>
                           <input type="file" name="file" id='i-file' onchange="get_file_name()" style="display: none">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                    </button>
                    <button type="button" class="btn btn-primary" id="file_upload">
                        提交
                    </button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
    </div>
     <div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h4 class="modal-title" id="myModalLabel">
                        爬虫获取
                    </h4>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal" role="form">
                        <div class="form-group">
                            <label for="repo_name_update" class="col-sm-3 control-label">输入关键字</label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" id="spider_key_word">
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                    </button>
                    <button type="button" class="btn btn-primary" id="spider_submit">
                        提交
                    </button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
    </div>
    <script>
    $(document).ready(function() {
        $('#dataTables-example').DataTable({
                responsive: true
        });
    });

    </script>
</body>
</html>